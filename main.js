(()=>{"use strict";const e=[];let t=0;const n=e=>({name:e,index:t,todoIndex:0,list:[]}),d=(e,t,n)=>({title:e,description:t,dueDate:n,index:0,complete:!1}),i=(t,n)=>{let d=e[n.index];d.list.push(t),t.index=d.todoIndex,d.todoIndex++},l=n=>{e.push(n),t++};let o=n("Default");l(o);let c=d("Try it out","Create more tasks",new Date(2021,12,21));i(c,o);let a=e[0],r=!1,u=!1,s=!1,p=!1;const m=document.getElementById("content"),C=document.createElement("div");C.id="side-bar";const h=document.createElement("div");h.id="todo-bar";const E=document.createElement("div");E.id="done-bar";const v=()=>{const n=document.createElement("p");n.id="side-title",n.textContent="Too-Much To-Do",C.appendChild(n);const d=document.createElement("div");e.forEach((n=>{let i=document.createElement("div"),l=document.createElement("div");n==a&&(i.style.backgroundColor="rgb(100, 98, 98)"),i.setAttribute("class","project-links"),l.addEventListener("click",(()=>{a=n,f(),b()})),l.textContent=n.name,i.appendChild(l);let o=document.createElement("div");i.appendChild(o),i.addEventListener("mouseenter",(function(){let d=document.createElement("button");d.textContent="#",d.setAttribute("class","project-buttons"),d.addEventListener("click",(function(e){e.stopPropagation(),p||function(e,t){for(p=!0;e.firstChild;)e.removeChild(e.firstChild);let n=document.createElement("form"),d=document.createElement("input");d.value=t.name,n.appendChild(d);let i=document.createElement("button");i.setAttribute("class","project-edit-buttons"),i.textContent="X",i.type="button",i.addEventListener("click",(function(e){e.preventDefault(),p=!1,b()})),n.appendChild(i);let l=document.createElement("button");l.setAttribute("class","project-edit-buttons"),l.textContent="v/",l.type="submit",n.appendChild(l),n.addEventListener("submit",(e=>{e.preventDefault(),t.name=d.value,p=!1,b()})),n.addEventListener("keyup",(function(e){"Enter"==e.key?l.click():"Escape"==e.key&&i.click()})),e.appendChild(n)}(i,n)})),o.appendChild(d);let l=document.createElement("button");l.textContent="X",l.setAttribute("class","project-buttons"),l.addEventListener("click",(function(d){var i;d.stopPropagation(),p=!1,i=n.index,e.splice(i,1),e.forEach((e=>{e.index>=i&&(e.index=e.index-1)})),t--,a=e[0],b(),f()})),o.appendChild(l)})),i.addEventListener("mouseleave",(function(){for(;o.firstChild;)o.removeChild(o.firstChild)})),d.appendChild(i)})),C.appendChild(d);const i=document.createElement("button");i.id="new-project-button",i.textContent="+",i.addEventListener("click",y),C.appendChild(i)};function f(){for(;h.firstChild;)h.removeChild(h.firstChild);for(;E.firstChild;)E.removeChild(E.firstChild);x()}function b(){for(;C.firstChild;)C.removeChild(C.firstChild);v()}function x(){const t=document.createElement("div");t.id="todo-top-div";const n=document.createElement("h3");n.textContent="To Do",t.appendChild(n);const d=document.createElement("button");d.id="new-task-button",d.textContent="+",d.addEventListener("click",k),t.appendChild(d),h.appendChild(t);const i=document.createElement("div");i.id="done-top-div";const l=document.createElement("h3");if(l.textContent="Completed",i.appendChild(l),E.appendChild(i),null==a){let e=document.createElement("p");e.id="no-tasks",e.textContent="Add a project",h.appendChild(e)}else{let t=a.list.slice();if(0==t.length){let e=document.createElement("p");e.id="no-tasks",e.textContent="Add some tasks",h.appendChild(e)}else t.reverse(),t.forEach((t=>{let n=document.createElement("div");n.setAttribute("class","task-div");let d=document.createElement("div");d.setAttribute("class","task-left");let i=document.createElement("div"),l=document.createElement("input");l.type="checkbox",l.setAttribute("class","complete-box"),t.complete&&(l.checked=!0),l.addEventListener("click",(function(){t.complete=!t.complete,f()})),i.appendChild(l);let o=document.createElement("p");o.setAttribute("class","task-name"),o.textContent=t.title,i.appendChild(o),d.appendChild(i);let c=document.createElement("p");c.setAttribute("class","task-due-date"),c.textContent=t.dueDate,d.appendChild(c),n.appendChild(d);let r=document.createElement("div");r.setAttribute("class","task-buttons"),n.appendChild(r),n.addEventListener("mouseenter",(function(){let d=document.createElement("button");d.textContent="#",d.setAttribute("class","task-button"),d.addEventListener("click",(function(){s||function(e,t){for(s=!0,e.style.width="320px",e.style.height="120px";e.firstChild;)e.removeChild(e.firstChild);let n=document.createElement("form"),d=document.createElement("input");d.type="text",d.required=!0,d.value=t.title,n.appendChild(d);let i=document.createElement("input");i.type="textarea",i.value=t.description,n.appendChild(i);let l=document.createElement("input");l.type="date",l.value=t.dueDate,n.appendChild(l);let o=document.createElement("button");o.textContent="Cancel",o.type="button",o.addEventListener("click",(function(e){e.preventDefault(),s=!1,f()})),n.appendChild(o);let c=document.createElement("button");c.type="submit",c.textContent="Submit",n.appendChild(c),n.addEventListener("submit",(n=>{n.preventDefault(),t.title=d.value,t.description=i.value,t.dueDate=l.value,e.style.width="300px",e.style.heigh="80px",s=!1,f()})),n.addEventListener("keyup",(function(e){"Enter"==e.key?c.click():"Escape"==e.key&&o.click()})),e.appendChild(n)}(n,t)})),r.appendChild(d);let i=document.createElement("button");i.textContent="X",i.setAttribute("class","task-button"),i.addEventListener("click",(function(){((t,n)=>{let d=e[n.index];d.list.splice(t.index,1),d.list.forEach((e=>{e.index>=t.index&&e.index--})),d.todoIndex--})(t,a),s=!1,f()})),r.appendChild(i)})),n.addEventListener("mouseleave",(function(){for(;r.firstChild;)r.removeChild(r.firstChild)})),t.complete?E.appendChild(n):h.appendChild(n)}))}}function k(){if(null!=a){if(r){let e=document.getElementById("new-task-div");h.removeChild(e)}r=!0;let e="",t="",n="",l=document.createElement("div");l.setAttribute("class","task-div"),l.id="new-task-div";let o=document.createElement("form"),c=document.createElement("input");c.type="text",c.required=!0,c.setAttribute("placeholder","Enter Task Name"),o.appendChild(c);let u=document.createElement("input");u.type="date",o.appendChild(u);let s=document.createElement("button");s.type="submit",s.textContent="Create",o.appendChild(s),o.addEventListener("submit",(l=>{l.preventDefault(),e=c.value,n=u.value;let o=d(e,t,n);i(o,a),r=!1,f()})),o.addEventListener("keyup",(function(e){"Escape"==e.key&&(r=!1,f())})),l.appendChild(o);let p=document.getElementById("todo-top-div");h.insertBefore(l,p.nextSibling),c.focus()}}function y(){if(u){let e=document.getElementById("new-proj-div");C.removeChild(e)}u=!0;let e=document.createElement("div");e.id="new-proj-div";let t=document.createElement("form"),d=document.createElement("input");d.id="new-project-name",d.type="text",d.style.width="100px",d.required=!0,t.appendChild(d),t.addEventListener("submit",(e=>{e.preventDefault();let t=d.value,i=n(t);l(i),a=i,u=!1,b(),f()})),t.addEventListener("keyup",(function(e){"Escape"==e.key&&(u=!1,b())})),e.appendChild(t);let i=document.getElementById("new-project-button");C.insertBefore(e,i),d.focus()}m.appendChild(C),m.appendChild(h),m.appendChild(E),v(),x()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UyxTQUFTSyxHQUMxQixVQUFUQSxFQUFFYSxNQUNGeEMsR0FBbUIsRUFDbkJ3QixRQUlSa0UsRUFBYzVFLFlBQVk2RSxHQUMxQixJQUFJRyxFQUFhMUYsU0FBU0MsZUFBZSxzQkFDekNDLEVBQVFnRixhQUFhSSxFQUFlSSxHQUNwQ0YsRUFBWUosUUE2R2hCckYsRUFBUVcsWUFBWVIsR0FDcEJILEVBQVFXLFlBQVlMLEdBQ3BCTixFQUFRVyxZQUFZSixHQzFacEJDLElBQ0FvQyxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3N0cnVjdHVyZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvRE9NZGlzcGxheS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tcGFyZUFzYywgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnXG5cbmNvbnN0IHByb2plY3RzID0gW107XG5sZXQgcHJvamVjdHNJbmRleCA9IDA7XG5cblxuXG5jb25zdCBQcm9qZWN0ID0gKG5hbWUpID0+IHtcbiAgICBsZXQgbGlzdCA9IFtdO1xuICAgIGxldCB0b2RvSW5kZXggPSAwO1xuICAgIGxldCBpbmRleCA9IHByb2plY3RzSW5kZXg7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHRvZG9JbmRleCxcbiAgICAgICAgbGlzdCxcbiAgICB9XG59XG5cbmNvbnN0IFRvZG8gPSAodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlKSA9PiB7XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBsZXQgY29tcGxldGUgPSBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIGR1ZURhdGUsXG4gICAgICAgIGluZGV4LFxuICAgICAgICBjb21wbGV0ZSxcbiAgICB9XG59XG5cbmNvbnN0IGFkZFRvZG8gPSAodG9kbywgcHJvamVjdCkgPT4ge1xuICAgIGxldCBjb3JyZWN0ID0gcHJvamVjdHNbcHJvamVjdC5pbmRleF07XG4gICAgY29ycmVjdC5saXN0LnB1c2godG9kbyk7XG4gICAgdG9kby5pbmRleCA9IGNvcnJlY3QudG9kb0luZGV4O1xuICAgIGNvcnJlY3QudG9kb0luZGV4Kys7XG59XG5cbmNvbnN0IHJlbW92ZVRvZG8gPSAodG9kbywgcHJvamVjdCkgPT4ge1xuICAgIGxldCBjb3JyZWN0ID0gcHJvamVjdHNbcHJvamVjdC5pbmRleF07XG4gICAgY29ycmVjdC5saXN0LnNwbGljZSh0b2RvLmluZGV4LCAxKTtcbiAgICBjb3JyZWN0Lmxpc3QuZm9yRWFjaCh0aGluZyA9PiB7XG4gICAgICAgIGlmICh0aGluZy5pbmRleCA+PSB0b2RvLmluZGV4KSB7XG4gICAgICAgICAgICB0aGluZy5pbmRleC0tO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29ycmVjdC50b2RvSW5kZXgtLTtcbn1cblxuY29uc3QgYWRkUHJvamVjdCA9IChwcm9qKSA9PiB7XG4gICAgcHJvamVjdHMucHVzaChwcm9qKTtcbiAgICBwcm9qZWN0c0luZGV4Kys7XG59XG5cbmNvbnN0IHJlbW92ZVByb2plY3QgPSAoaW5kZXgpID0+IHtcbiAgICBwcm9qZWN0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgIGlmIChwcm9qZWN0LmluZGV4ID49IGluZGV4KSB7XG4gICAgICAgICAgICBwcm9qZWN0LmluZGV4ID0gcHJvamVjdC5pbmRleCAtIDE7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBwcm9qZWN0c0luZGV4LS07XG59XG5cbmxldCBkZWZhdWx0UHJvamVjdCA9IFByb2plY3QoJ0RlZmF1bHQnKTtcbmFkZFByb2plY3QoZGVmYXVsdFByb2plY3QpO1xuXG5sZXQgdG9kbzEgPSBUb2RvKCdUcnkgaXQgb3V0JywgJ0NyZWF0ZSBtb3JlIHRhc2tzJywgbmV3IERhdGUoMjAyMSwgMTIsIDIxKSk7XG5cbmFkZFRvZG8odG9kbzEsIGRlZmF1bHRQcm9qZWN0KTtcblxuZXhwb3J0IHtwcm9qZWN0cywgVG9kbywgUHJvamVjdCwgYWRkVG9kbywgcmVtb3ZlVG9kbywgYWRkUHJvamVjdCwgcmVtb3ZlUHJvamVjdH0iLCJpbXBvcnQge3Byb2plY3RzLCBUb2RvLCBQcm9qZWN0LCBhZGRUb2RvLCByZW1vdmVUb2RvLCBhZGRQcm9qZWN0LCByZW1vdmVQcm9qZWN0fSBmcm9tICcuL3N0cnVjdHVyZSdcblxubGV0IGN1cnJlbnRQcm9qZWN0ID0gcHJvamVjdHNbMF07XG5cbmxldCBuZXdUYXNrQWN0aXZlID0gZmFsc2U7XG5cbmxldCBuZXdQcm9qZWN0QWN0aXZlID0gZmFsc2U7XG5cbmxldCBlZGl0VGFza0FjdGl2ZSA9IGZhbHNlO1xuXG5sZXQgZWRpdFByb2plY3RBY3RpdmUgPSBmYWxzZTtcblxuY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50Jyk7XG5cbmNvbnN0IHNpZGVCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbnNpZGVCYXIuaWQgPSAnc2lkZS1iYXInO1xuXG5jb25zdCB0b2RvQmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG50b2RvQmFyLmlkID0gJ3RvZG8tYmFyJztcblxuY29uc3QgZG9uZUJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuZG9uZUJhci5pZCA9ICdkb25lLWJhcic7XG5cbmNvbnN0IGNyZWF0ZVNpZGViYXIgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2lkZVRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIHNpZGVUaXRsZS5pZCA9ICdzaWRlLXRpdGxlJztcbiAgICBzaWRlVGl0bGUudGV4dENvbnRlbnQgPSAnVG9vLU11Y2ggVG8tRG8nO1xuICAgIHNpZGVCYXIuYXBwZW5kQ2hpbGQoc2lkZVRpdGxlKTtcblxuICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgICAgbGV0IGN1cnJQcm9qID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGxldCBjdXJyUHJvak5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaWYgKHByb2plY3QgPT0gY3VycmVudFByb2plY3QpIHtcbiAgICAgICAgICAgIGN1cnJQcm9qLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZ2IoMTAwLCA5OCwgOTgpJztcbiAgICAgICAgfTtcbiAgICAgICAgY3VyclByb2ouc2V0QXR0cmlidXRlKCdjbGFzcycsICdwcm9qZWN0LWxpbmtzJyk7XG4gICAgICAgIGN1cnJQcm9qTmFtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGN1cnJlbnRQcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgICAgIGNsZWFyVGFza3MoKTtcbiAgICAgICAgICAgIGNsZWFyU2lkZWJhcigpO1xuICAgICAgICB9KTtcbiAgICAgICAgY3VyclByb2pOYW1lLnRleHRDb250ZW50ID0gcHJvamVjdC5uYW1lO1xuICAgICAgICBjdXJyUHJvai5hcHBlbmRDaGlsZChjdXJyUHJvak5hbWUpO1xuICAgICAgICBsZXQgcHJvamVjdEJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY3VyclByb2ouYXBwZW5kQ2hpbGQocHJvamVjdEJ1dHRvbnMpO1xuICAgICAgICBjdXJyUHJvai5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsZXQgZWRpdFByb2plY3RCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIGVkaXRQcm9qZWN0QnV0dG9uLnRleHRDb250ZW50ID0gXCIjXCI7XG4gICAgICAgICAgICBlZGl0UHJvamVjdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3Byb2plY3QtYnV0dG9ucycpO1xuICAgICAgICAgICAgZWRpdFByb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVkaXRQcm9qZWN0QWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRQcm9qZWN0KGN1cnJQcm9qLCBwcm9qZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHByb2plY3RCdXR0b25zLmFwcGVuZENoaWxkKGVkaXRQcm9qZWN0QnV0dG9uKTtcblxuICAgICAgICAgICAgbGV0IGRlbGV0ZVByb2plY3RCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIGRlbGV0ZVByb2plY3RCdXR0b24udGV4dENvbnRlbnQgPSAnWCc7XG4gICAgICAgICAgICBkZWxldGVQcm9qZWN0QnV0dG9uLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncHJvamVjdC1idXR0b25zJyk7XG4gICAgICAgICAgICBkZWxldGVQcm9qZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgZWRpdFByb2plY3RBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZW1vdmVQcm9qZWN0KHByb2plY3QuaW5kZXgpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9qZWN0ID0gcHJvamVjdHNbMF07XG4gICAgICAgICAgICAgICAgY2xlYXJTaWRlYmFyKCk7XG4gICAgICAgICAgICAgICAgY2xlYXJUYXNrcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcm9qZWN0QnV0dG9ucy5hcHBlbmRDaGlsZChkZWxldGVQcm9qZWN0QnV0dG9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGN1cnJQcm9qLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHdoaWxlIChwcm9qZWN0QnV0dG9ucy5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdEJ1dHRvbnMucmVtb3ZlQ2hpbGQocHJvamVjdEJ1dHRvbnMuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgICBwcm9qZWN0TGlzdC5hcHBlbmRDaGlsZChjdXJyUHJvaik7XG4gICAgfSk7XG5cbiAgICBzaWRlQmFyLmFwcGVuZENoaWxkKHByb2plY3RMaXN0KTtcbiAgICBjb25zdCBuZXdQcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgbmV3UHJvamVjdEJ1dHRvbi5pZCA9ICduZXctcHJvamVjdC1idXR0b24nO1xuICAgIG5ld1Byb2plY3RCdXR0b24udGV4dENvbnRlbnQgPSAnKyc7XG4gICAgbmV3UHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG5ld1Byb2plY3RGb3JtKTtcblxuICAgIHNpZGVCYXIuYXBwZW5kQ2hpbGQobmV3UHJvamVjdEJ1dHRvbik7XG5cbn1cblxuZnVuY3Rpb24gY2xlYXJUYXNrcygpIHtcbiAgICB3aGlsZSAodG9kb0Jhci5maXJzdENoaWxkKSB7XG4gICAgICAgIHRvZG9CYXIucmVtb3ZlQ2hpbGQodG9kb0Jhci5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgd2hpbGUgKGRvbmVCYXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBkb25lQmFyLnJlbW92ZUNoaWxkKGRvbmVCYXIuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIGNyZWF0ZVRhc2tzQmFyKCk7XG59O1xuXG5mdW5jdGlvbiBjbGVhclNpZGViYXIoKSB7XG4gICAgd2hpbGUoc2lkZUJhci5maXJzdENoaWxkKSB7XG4gICAgICAgIHNpZGVCYXIucmVtb3ZlQ2hpbGQoc2lkZUJhci5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgY3JlYXRlU2lkZWJhcigpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUYXNrc0JhcigpIHtcbiAgICBjb25zdCB0b2RvVG9wRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdG9kb1RvcERpdi5pZCA9ICd0b2RvLXRvcC1kaXYnO1xuICAgIGNvbnN0IHRvZG9UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gICAgdG9kb1RpdGxlLnRleHRDb250ZW50ID0gJ1RvIERvJztcbiAgICB0b2RvVG9wRGl2LmFwcGVuZENoaWxkKHRvZG9UaXRsZSk7XG4gICAgY29uc3QgbmV3VGFza0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIG5ld1Rhc2tCdXR0b24uaWQgPSAnbmV3LXRhc2stYnV0dG9uJztcbiAgICBuZXdUYXNrQnV0dG9uLnRleHRDb250ZW50ID0gJysnO1xuICAgIG5ld1Rhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBuZXdUYXNrRm9ybSk7XG4gICAgdG9kb1RvcERpdi5hcHBlbmRDaGlsZChuZXdUYXNrQnV0dG9uKTtcbiAgICB0b2RvQmFyLmFwcGVuZENoaWxkKHRvZG9Ub3BEaXYpO1xuXG4gICAgY29uc3QgZG9uZVRvcERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRvbmVUb3BEaXYuaWQgPSAnZG9uZS10b3AtZGl2JztcbiAgICBjb25zdCBkb25lVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICAgIGRvbmVUaXRsZS50ZXh0Q29udGVudCA9ICdDb21wbGV0ZWQnO1xuICAgIGRvbmVUb3BEaXYuYXBwZW5kQ2hpbGQoZG9uZVRpdGxlKTtcbiAgICBkb25lQmFyLmFwcGVuZENoaWxkKGRvbmVUb3BEaXYpO1xuXG4gICAgaWYgKGN1cnJlbnRQcm9qZWN0ID09IG51bGwpIHtcbiAgICAgICAgbGV0IG5vVGFza3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIG5vVGFza3MuaWQgPSAnbm8tdGFza3MnO1xuICAgICAgICBub1Rhc2tzLnRleHRDb250ZW50ID0gJ0FkZCBhIHByb2plY3QnO1xuICAgICAgICB0b2RvQmFyLmFwcGVuZENoaWxkKG5vVGFza3MpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IHJldmVyc2VkTGlzdCA9IGN1cnJlbnRQcm9qZWN0Lmxpc3Quc2xpY2UoKTtcbiAgICAgICAgaWYgKHJldmVyc2VkTGlzdC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgbGV0IG5vVGFza3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgICAgICBub1Rhc2tzLmlkID0gJ25vLXRhc2tzJztcbiAgICAgICAgICAgIG5vVGFza3MudGV4dENvbnRlbnQgPSAnQWRkIHNvbWUgdGFza3MnO1xuICAgICAgICAgICAgdG9kb0Jhci5hcHBlbmRDaGlsZChub1Rhc2tzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldmVyc2VkTGlzdC5yZXZlcnNlKCk7XG4gICAgICAgICAgICByZXZlcnNlZExpc3QuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRhc2tEaXYuc2V0QXR0cmlidXRlKCdjbGFzcycsICd0YXNrLWRpdicpO1xuXG4gICAgICAgICAgICAgICAgbGV0IHRhc2tMZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGFza0xlZnQuc2V0QXR0cmlidXRlKCdjbGFzcycsICd0YXNrLWxlZnQnKTtcblxuICAgICAgICAgICAgICAgIGxldCB0YXNrSW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGxldCB0YXNrQ29tcGxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIHRhc2tDb21wbGV0ZS50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgICAgICAgICB0YXNrQ29tcGxldGUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdjb21wbGV0ZS1ib3gnKTtcbiAgICAgICAgICAgICAgICBpZiAodGFzay5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ29tcGxldGUuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhc2tDb21wbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLmNvbXBsZXRlID0gIXRhc2suY29tcGxldGU7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGFza3MoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0YXNrSW5mby5hcHBlbmRDaGlsZCh0YXNrQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgIGxldCB0YXNrTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgICAgICB0YXNrTmFtZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3Rhc2stbmFtZScpO1xuICAgICAgICAgICAgICAgIHRhc2tOYW1lLnRleHRDb250ZW50ID0gdGFzay50aXRsZTtcbiAgICAgICAgICAgICAgICB0YXNrSW5mby5hcHBlbmRDaGlsZCh0YXNrTmFtZSk7XG4gICAgICAgICAgICAgICAgdGFza0xlZnQuYXBwZW5kQ2hpbGQodGFza0luZm8pO1xuXG4gICAgICAgICAgICAgICAgbGV0IHRhc2tEdWVkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgICAgIHRhc2tEdWVkYXRlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndGFzay1kdWUtZGF0ZScpO1xuICAgICAgICAgICAgICAgIHRhc2tEdWVkYXRlLnRleHRDb250ZW50ID0gdGFzay5kdWVEYXRlO1xuICAgICAgICAgICAgICAgIHRhc2tMZWZ0LmFwcGVuZENoaWxkKHRhc2tEdWVkYXRlKTtcbiAgICAgICAgICAgICAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tMZWZ0KTtcblxuICAgICAgICAgICAgICAgIGxldCB0YXNrQnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRhc2tCdXR0b25zLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndGFzay1idXR0b25zJyk7XG4gICAgICAgICAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrQnV0dG9ucyk7XG4gICAgICAgICAgICAgICAgdGFza0Rpdi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRCdXR0b24udGV4dENvbnRlbnQgPSAnIyc7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRCdXR0b24uc2V0QXR0cmlidXRlKCdjbGFzcycsICd0YXNrLWJ1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICBlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZighZWRpdFRhc2tBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0VGFzayh0YXNrRGl2LCB0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tCdXR0b25zLmFwcGVuZENoaWxkKGVkaXRCdXR0b24pO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBkZWxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gJ1gnO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVCdXR0b24uc2V0QXR0cmlidXRlKCdjbGFzcycsICd0YXNrLWJ1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVRvZG8odGFzaywgY3VycmVudFByb2plY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdFRhc2tBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGFza3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tCdXR0b25zLmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGFza0Rpdi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh0YXNrQnV0dG9ucy5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrQnV0dG9ucy5yZW1vdmVDaGlsZCh0YXNrQnV0dG9ucy5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0YXNrLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbmVCYXIuYXBwZW5kQ2hpbGQodGFza0Rpdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2RvQmFyLmFwcGVuZENoaWxkKHRhc2tEaXYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxufVxuXG5mdW5jdGlvbiBuZXdUYXNrRm9ybSgpIHtcbiAgICBpZiAoY3VycmVudFByb2plY3QgIT0gbnVsbCkge1xuICAgICAgICBpZiAobmV3VGFza0FjdGl2ZSkge1xuICAgICAgICAgICAgbGV0IGxhc3ROZXdUYXNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy10YXNrLWRpdicpXG4gICAgICAgICAgICB0b2RvQmFyLnJlbW92ZUNoaWxkKGxhc3ROZXdUYXNrKTtcbiAgICAgICAgfVxuICAgICAgICBuZXdUYXNrQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgbGV0IG5hbWUgPSBcIlwiO1xuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuICAgICAgICBsZXQgZGF0ZSA9IFwiXCI7XG5cbiAgICAgICAgbGV0IG5ld1Rhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbmV3VGFza0Rpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3Rhc2stZGl2Jyk7XG4gICAgICAgIG5ld1Rhc2tEaXYuaWQgPSAnbmV3LXRhc2stZGl2JztcbiAgICAgICAgbGV0IG5ld1Rhc2tGb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgICAgICBsZXQgbmV3VGFza05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBuZXdUYXNrTmFtZS50eXBlID0gJ3RleHQnO1xuICAgICAgICBuZXdUYXNrTmFtZS5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgIG5ld1Rhc2tOYW1lLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnRW50ZXIgVGFzayBOYW1lJyk7XG4gICAgICAgIG5ld1Rhc2tGb3JtLmFwcGVuZENoaWxkKG5ld1Rhc2tOYW1lKTtcbiAgICAgICAgbGV0IG5ld1Rhc2tEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgbmV3VGFza0RhdGUudHlwZSA9ICdkYXRlJztcbiAgICAgICAgbmV3VGFza0Zvcm0uYXBwZW5kQ2hpbGQobmV3VGFza0RhdGUpO1xuXG4gICAgICAgIGxldCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgc3VibWl0QnV0dG9uLnR5cGUgPSAnc3VibWl0JztcbiAgICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJDcmVhdGVcIjtcbiAgICAgICAgbmV3VGFza0Zvcm0uYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKTtcbiAgICAgICAgbmV3VGFza0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbmFtZSA9IG5ld1Rhc2tOYW1lLnZhbHVlO1xuICAgICAgICAgICAgZGF0ZSA9IG5ld1Rhc2tEYXRlLnZhbHVlO1xuICAgICAgICAgICAgbGV0IHRvZG8gPSBUb2RvKG5hbWUsIGRlc2NyaXB0aW9uLCBkYXRlLCBjdXJyZW50UHJvamVjdCk7XG4gICAgICAgICAgICBhZGRUb2RvKHRvZG8sIGN1cnJlbnRQcm9qZWN0KTtcbiAgICAgICAgICAgIG5ld1Rhc2tBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNsZWFyVGFza3MoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3VGFza0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY2xlYXJUYXNrcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBuZXdUYXNrRGl2LmFwcGVuZENoaWxkKG5ld1Rhc2tGb3JtKTtcbiAgICAgICAgbGV0IHRpdGxlQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG8tdG9wLWRpdicpO1xuICAgICAgICB0b2RvQmFyLmluc2VydEJlZm9yZShuZXdUYXNrRGl2LCB0aXRsZUJhci5uZXh0U2libGluZyk7XG4gICAgICAgIG5ld1Rhc2tOYW1lLmZvY3VzKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBuZXdQcm9qZWN0Rm9ybSAoKSB7XG4gICAgaWYgKG5ld1Byb2plY3RBY3RpdmUpIHtcbiAgICAgICAgbGV0IGxhc3ROZXdQcm9qZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1wcm9qLWRpdicpXG4gICAgICAgIHNpZGVCYXIucmVtb3ZlQ2hpbGQobGFzdE5ld1Byb2plY3QpO1xuICAgIH1cbiAgICBuZXdQcm9qZWN0QWN0aXZlID0gdHJ1ZTtcbiAgICBsZXQgbmV3UHJvamVjdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG5ld1Byb2plY3REaXYuaWQgPSAnbmV3LXByb2otZGl2JztcbiAgICBsZXQgbmV3Rm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICBsZXQgbmV3UHJvak5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIG5ld1Byb2pOYW1lLmlkID0gJ25ldy1wcm9qZWN0LW5hbWUnO1xuICAgIG5ld1Byb2pOYW1lLnR5cGUgPSAndGV4dCc7XG4gICAgbmV3UHJvak5hbWUuc3R5bGUud2lkdGggPSAnMTAwcHgnO1xuICAgIG5ld1Byb2pOYW1lLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICBuZXdGb3JtLmFwcGVuZENoaWxkKG5ld1Byb2pOYW1lKTtcbiAgICBuZXdGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQgcHJvak5hbWUgPSBuZXdQcm9qTmFtZS52YWx1ZTtcbiAgICAgICAgbGV0IHByb2plY3QgPSBQcm9qZWN0KHByb2pOYW1lKTtcbiAgICAgICAgYWRkUHJvamVjdChwcm9qZWN0KTtcbiAgICAgICAgY3VycmVudFByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICBuZXdQcm9qZWN0QWN0aXZlID0gZmFsc2U7XG4gICAgICAgIGNsZWFyU2lkZWJhcigpO1xuICAgICAgICBjbGVhclRhc2tzKCk7XG4gICAgfSk7XG5cbiAgICBuZXdGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZS5rZXkgPT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgIG5ld1Byb2plY3RBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNsZWFyU2lkZWJhcigpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBuZXdQcm9qZWN0RGl2LmFwcGVuZENoaWxkKG5ld0Zvcm0pO1xuICAgIGxldCBwbHVzQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1wcm9qZWN0LWJ1dHRvbicpO1xuICAgIHNpZGVCYXIuaW5zZXJ0QmVmb3JlKG5ld1Byb2plY3REaXYsIHBsdXNCdXR0b24pO1xuICAgIG5ld1Byb2pOYW1lLmZvY3VzKCk7XG59O1xuXG5mdW5jdGlvbiBlZGl0UHJvamVjdChkaXYsIHByb2plY3QpIHtcbiAgICBlZGl0UHJvamVjdEFjdGl2ZSA9IHRydWU7XG4gICAgd2hpbGUgKGRpdi5maXJzdENoaWxkKSB7XG4gICAgICAgIGRpdi5yZW1vdmVDaGlsZChkaXYuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIGxldCBwcm9qZWN0Rm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICBsZXQgZWRpdE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGVkaXROYW1lLnZhbHVlID0gcHJvamVjdC5uYW1lO1xuICAgIHByb2plY3RGb3JtLmFwcGVuZENoaWxkKGVkaXROYW1lKTtcbiAgICBsZXQgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgY2FuY2VsQnV0dG9uLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncHJvamVjdC1lZGl0LWJ1dHRvbnMnKTtcbiAgICBjYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSAnWCc7XG4gICAgY2FuY2VsQnV0dG9uLnR5cGUgPSAnYnV0dG9uJztcbiAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlZGl0UHJvamVjdEFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBjbGVhclNpZGViYXIoKTtcbiAgICB9KTtcbiAgICBwcm9qZWN0Rm9ybS5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xuICAgIGxldCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBzdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdjbGFzcycsICdwcm9qZWN0LWVkaXQtYnV0dG9ucycpO1xuICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwidi9cIjtcbiAgICBzdWJtaXRCdXR0b24udHlwZSA9ICdzdWJtaXQnO1xuICAgIHByb2plY3RGb3JtLmFwcGVuZENoaWxkKHN1Ym1pdEJ1dHRvbik7XG4gICAgcHJvamVjdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHByb2plY3QubmFtZSA9IGVkaXROYW1lLnZhbHVlO1xuICAgICAgICBlZGl0UHJvamVjdEFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBjbGVhclNpZGViYXIoKTtcbiAgICB9KTtcblxuICAgIHByb2plY3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZS5rZXkgPT0gJ0VudGVyJykge1xuICAgICAgICAgICAgc3VibWl0QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbi5jbGljaygpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBkaXYuYXBwZW5kQ2hpbGQocHJvamVjdEZvcm0pO1xufVxuXG5mdW5jdGlvbiBlZGl0VGFzayAoZGl2LCB0YXNrKSB7XG4gICAgZWRpdFRhc2tBY3RpdmUgPSB0cnVlO1xuICAgIGRpdi5zdHlsZS53aWR0aCA9ICczMjBweCc7XG4gICAgZGl2LnN0eWxlLmhlaWdodCA9ICcxMjBweCc7XG5cbiAgICB3aGlsZSAoZGl2LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgZGl2LnJlbW92ZUNoaWxkKGRpdi5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBsZXQgdGFza0Zvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gICAgbGV0IGVkaXROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBlZGl0TmFtZS50eXBlID0gJ3RleHQnO1xuICAgIGVkaXROYW1lLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICBlZGl0TmFtZS52YWx1ZSA9IHRhc2sudGl0bGU7XG4gICAgdGFza0Zvcm0uYXBwZW5kQ2hpbGQoZWRpdE5hbWUpO1xuXG4gICAgbGV0IGVkaXREZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgZWRpdERlc2NyaXB0aW9uLnR5cGUgPSAndGV4dGFyZWEnO1xuICAgIGVkaXREZXNjcmlwdGlvbi52YWx1ZSA9IHRhc2suZGVzY3JpcHRpb247XG4gICAgdGFza0Zvcm0uYXBwZW5kQ2hpbGQoZWRpdERlc2NyaXB0aW9uKTtcblxuICAgIGxldCBlZGl0RGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgZWRpdERhdGUudHlwZSA9ICdkYXRlJztcbiAgICBlZGl0RGF0ZS52YWx1ZSA9IHRhc2suZHVlRGF0ZTtcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZChlZGl0RGF0ZSk7XG5cbiAgICBsZXQgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gJ0NhbmNlbCc7XG4gICAgY2FuY2VsQnV0dG9uLnR5cGUgPSAnYnV0dG9uJztcbiAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlZGl0VGFza0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBjbGVhclRhc2tzKCk7XG4gICAgfSk7XG4gICAgdGFza0Zvcm0uYXBwZW5kQ2hpbGQoY2FuY2VsQnV0dG9uKTtcblxuICAgIGxldCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBzdWJtaXRCdXR0b24udHlwZSA9ICdzdWJtaXQnO1xuICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU3VibWl0XCI7XG4gICAgdGFza0Zvcm0uYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKTtcbiAgICB0YXNrRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGFzay50aXRsZSA9IGVkaXROYW1lLnZhbHVlO1xuICAgICAgICB0YXNrLmRlc2NyaXB0aW9uID0gZWRpdERlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICB0YXNrLmR1ZURhdGUgPSBlZGl0RGF0ZS52YWx1ZTtcbiAgICAgICAgZGl2LnN0eWxlLndpZHRoID0gJzMwMHB4JztcbiAgICAgICAgZGl2LnN0eWxlLmhlaWdoPSAnODBweCc7XG4gICAgICAgIGVkaXRUYXNrQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIGNsZWFyVGFza3MoKTtcbiAgICB9KTtcbiAgICB0YXNrRm9ybS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUua2V5ID09ICdFbnRlcicpIHtcbiAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGUua2V5ID09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICBjYW5jZWxCdXR0b24uY2xpY2soKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZGl2LmFwcGVuZENoaWxkKHRhc2tGb3JtKTtcbn1cblxuXG5jb250ZW50LmFwcGVuZENoaWxkKHNpZGVCYXIpO1xuY29udGVudC5hcHBlbmRDaGlsZCh0b2RvQmFyKTtcbmNvbnRlbnQuYXBwZW5kQ2hpbGQoZG9uZUJhcik7XG5cbmV4cG9ydCB7Y3JlYXRlU2lkZWJhciwgY3JlYXRlVGFza3NCYXJ9IiwiaW1wb3J0IHtjcmVhdGVTaWRlYmFyLCBjcmVhdGVUYXNrc0Jhcn0gZnJvbSAnLi9ET01kaXNwbGF5J1xuXG5cblxuY3JlYXRlU2lkZWJhcigpO1xuY3JlYXRlVGFza3NCYXIoKTsiXSwibmFtZXMiOlsicHJvamVjdHMiLCJwcm9qZWN0c0luZGV4IiwiUHJvamVjdCIsIm5hbWUiLCJpbmRleCIsInRvZG9JbmRleCIsImxpc3QiLCJUb2RvIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJjb21wbGV0ZSIsImFkZFRvZG8iLCJ0b2RvIiwicHJvamVjdCIsImNvcnJlY3QiLCJwdXNoIiwiYWRkUHJvamVjdCIsInByb2oiLCJkZWZhdWx0UHJvamVjdCIsInRvZG8xIiwiRGF0ZSIsImN1cnJlbnRQcm9qZWN0IiwibmV3VGFza0FjdGl2ZSIsIm5ld1Byb2plY3RBY3RpdmUiLCJlZGl0VGFza0FjdGl2ZSIsImVkaXRQcm9qZWN0QWN0aXZlIiwiY29udGVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzaWRlQmFyIiwiY3JlYXRlRWxlbWVudCIsImlkIiwidG9kb0JhciIsImRvbmVCYXIiLCJjcmVhdGVTaWRlYmFyIiwic2lkZVRpdGxlIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsInByb2plY3RMaXN0IiwiZm9yRWFjaCIsImN1cnJQcm9qIiwiY3VyclByb2pOYW1lIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xlYXJUYXNrcyIsImNsZWFyU2lkZWJhciIsInByb2plY3RCdXR0b25zIiwiZWRpdFByb2plY3RCdXR0b24iLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiZGl2IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwicHJvamVjdEZvcm0iLCJlZGl0TmFtZSIsInZhbHVlIiwiY2FuY2VsQnV0dG9uIiwidHlwZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdWJtaXRCdXR0b24iLCJrZXkiLCJjbGljayIsImVkaXRQcm9qZWN0IiwiZGVsZXRlUHJvamVjdEJ1dHRvbiIsInNwbGljZSIsIm5ld1Byb2plY3RCdXR0b24iLCJuZXdQcm9qZWN0Rm9ybSIsImNyZWF0ZVRhc2tzQmFyIiwidG9kb1RvcERpdiIsInRvZG9UaXRsZSIsIm5ld1Rhc2tCdXR0b24iLCJuZXdUYXNrRm9ybSIsImRvbmVUb3BEaXYiLCJkb25lVGl0bGUiLCJub1Rhc2tzIiwicmV2ZXJzZWRMaXN0Iiwic2xpY2UiLCJsZW5ndGgiLCJyZXZlcnNlIiwidGFzayIsInRhc2tEaXYiLCJ0YXNrTGVmdCIsInRhc2tJbmZvIiwidGFza0NvbXBsZXRlIiwiY2hlY2tlZCIsInRhc2tOYW1lIiwidGFza0R1ZWRhdGUiLCJ0YXNrQnV0dG9ucyIsImVkaXRCdXR0b24iLCJ3aWR0aCIsImhlaWdodCIsInRhc2tGb3JtIiwicmVxdWlyZWQiLCJlZGl0RGVzY3JpcHRpb24iLCJlZGl0RGF0ZSIsImhlaWdoIiwiZWRpdFRhc2siLCJkZWxldGVCdXR0b24iLCJ0aGluZyIsInJlbW92ZVRvZG8iLCJsYXN0TmV3VGFzayIsImRhdGUiLCJuZXdUYXNrRGl2IiwibmV3VGFza05hbWUiLCJuZXdUYXNrRGF0ZSIsInRpdGxlQmFyIiwiaW5zZXJ0QmVmb3JlIiwibmV4dFNpYmxpbmciLCJmb2N1cyIsImxhc3ROZXdQcm9qZWN0IiwibmV3UHJvamVjdERpdiIsIm5ld0Zvcm0iLCJuZXdQcm9qTmFtZSIsInByb2pOYW1lIiwicGx1c0J1dHRvbiJdLCJzb3VyY2VSb290IjoiIn0=